'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.query = undefined;

var _lodash = require('lodash');

var _lodash2 = _interopRequireDefault(_lodash);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Queries the whole Refract tree and finds a respective
 * element(s) which matches the query.
 */
function query(element, elementQuery) {
  if (!element.content) {
    return [];
  }

  if (!_lodash2.default.isArray(element.content)) {
    return [];
  }

  var results = _lodash2.default.where(element.content, elementQuery);

  return _lodash2.default.chain(element.content).map(function (nestedElement) {
    return query(nestedElement, elementQuery);
  }).flatten().concat(results).value();
}

exports.query = query;
exports.default = query;